2025-03-27 21:33:21.073 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:36312/thread:1] (clientIp:, Scheme:) Executed DbCommand (34ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='chat' AND
          c.relname='__EFMigrationsHistory'
)
2025-03-27 21:33:21.137 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:36312/thread:1] (clientIp:, Scheme:) Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='chat' AND
          c.relname='__EFMigrationsHistory'
)
2025-03-27 21:33:21.228 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:36312/thread:1] (clientIp:, Scheme:) Executed DbCommand (22ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DO $EF$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM pg_namespace WHERE nspname = 'chat') THEN
        CREATE SCHEMA chat;
    END IF;
END $EF$;
CREATE TABLE chat."__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2025-03-27 21:33:21.254 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:36312/thread:1] (clientIp:, Scheme:) Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='chat' AND
          c.relname='__EFMigrationsHistory'
)
2025-03-27 21:33:21.260 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:36312/thread:1] (clientIp:, Scheme:) Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM chat."__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-03-27 21:33:21.275 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:36312/thread:1] (clientIp:, Scheme:) Applying migration '20250327143220_Create_Database'.
2025-03-27 21:33:21.340 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:36312/thread:1] (clientIp:, Scheme:) Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "GroupRoles" (
    "Role" text NOT NULL,
    "Description" text NOT NULL,
    "IsDefault" boolean NOT NULL,
    "IsSystem" boolean NOT NULL,
    CONSTRAINT "PK_GroupRoles" PRIMARY KEY ("Role")
);
2025-03-27 21:33:21.348 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:36312/thread:1] (clientIp:, Scheme:) Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "InboxMessages" (
    "Id" uuid NOT NULL,
    "Type" text NOT NULL,
    "Content" jsonb NOT NULL,
    "OccurredOnUtc" timestamp with time zone NOT NULL,
    "ProcessedOnUtc" timestamp with time zone,
    "Error" text,
    CONSTRAINT "PK_InboxMessages" PRIMARY KEY ("Id")
);
2025-03-27 21:33:21.354 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:36312/thread:1] (clientIp:, Scheme:) Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "OutboxMessages" (
    "Id" uuid NOT NULL,
    "Type" text NOT NULL,
    "Content" jsonb NOT NULL,
    "OccurredOnUtc" timestamp with time zone NOT NULL,
    "ProcessedOnUtc" timestamp with time zone,
    "Error" text,
    CONSTRAINT "PK_OutboxMessages" PRIMARY KEY ("Id")
);
2025-03-27 21:33:21.361 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:36312/thread:1] (clientIp:, Scheme:) Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Reactions" (
    "Id" text NOT NULL,
    "ReactionDescription" text NOT NULL,
    "MimeType" text NOT NULL,
    "Value" text NOT NULL,
    "IsSystem" boolean NOT NULL,
    CONSTRAINT "PK_Reactions" PRIMARY KEY ("Id")
);
2025-03-27 21:33:21.368 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:36312/thread:1] (clientIp:, Scheme:) Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Users" (
    "Id" text NOT NULL,
    "Name" text NOT NULL,
    "Email" text NOT NULL,
    "IdentityId" character varying(100) NOT NULL,
    "AvatarUri" text NOT NULL,
    "CreatedAt" timestamp with time zone NOT NULL,
    "UpdatedAt" timestamp with time zone NOT NULL,
    "IsVerified" boolean NOT NULL,
    CONSTRAINT "PK_Users" PRIMARY KEY ("Id")
);
2025-03-27 21:33:21.376 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:36312/thread:1] (clientIp:, Scheme:) Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "InboxMessageConsumers" (
    "InboxMessageId" uuid NOT NULL,
    "Name" text NOT NULL,
    CONSTRAINT "PK_InboxMessageConsumers" PRIMARY KEY ("InboxMessageId", "Name"),
    CONSTRAINT "FK_InboxMessageConsumers_InboxMessages_InboxMessageId" FOREIGN KEY ("InboxMessageId") REFERENCES "InboxMessages" ("Id") ON DELETE CASCADE
);
2025-03-27 21:33:21.385 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:36312/thread:1] (clientIp:, Scheme:) Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "OutboxMessageConsumers" (
    "OutboxMessageId" uuid NOT NULL,
    "Name" text NOT NULL,
    CONSTRAINT "PK_OutboxMessageConsumers" PRIMARY KEY ("OutboxMessageId", "Name"),
    CONSTRAINT "FK_OutboxMessageConsumers_OutboxMessages_OutboxMessageId" FOREIGN KEY ("OutboxMessageId") REFERENCES "OutboxMessages" ("Id") ON DELETE CASCADE
);
2025-03-27 21:33:21.393 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:36312/thread:1] (clientIp:, Scheme:) Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Groups" (
    "Id" uuid NOT NULL,
    "Name" text NOT NULL,
    "CreatorId" text NOT NULL,
    "CreatedAt" timestamp with time zone NOT NULL,
    CONSTRAINT "PK_Groups" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_Groups_Users_CreatorId" FOREIGN KEY ("CreatorId") REFERENCES "Users" ("Id")
);
2025-03-27 21:33:21.403 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:36312/thread:1] (clientIp:, Scheme:) Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "Message" (
    "Id" uuid NOT NULL,
    "SenderId" text NOT NULL,
    "ReceiverId" text NOT NULL,
    "Content" text NOT NULL,
    "ReferenceId" uuid,
    "RefrenceMessageId" uuid,
    "CreatedAt" timestamp with time zone NOT NULL,
    "DeletedAt" timestamp with time zone,
    CONSTRAINT "PK_Message" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_Message_Message_RefrenceMessageId" FOREIGN KEY ("RefrenceMessageId") REFERENCES "Message" ("Id"),
    CONSTRAINT "FK_Message_Users_SenderId" FOREIGN KEY ("SenderId") REFERENCES "Users" ("Id") ON DELETE CASCADE
);
2025-03-27 21:33:21.412 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:36312/thread:1] (clientIp:, Scheme:) Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "UserFriends" (
    "UserId" text NOT NULL,
    "FriendId" text NOT NULL,
    CONSTRAINT "PK_UserFriends" PRIMARY KEY ("FriendId", "UserId"),
    CONSTRAINT "FK_UserFriends_Users_FriendId" FOREIGN KEY ("FriendId") REFERENCES "Users" ("Id") ON DELETE RESTRICT,
    CONSTRAINT "FK_UserFriends_Users_UserId" FOREIGN KEY ("UserId") REFERENCES "Users" ("Id") ON DELETE RESTRICT
);
2025-03-27 21:33:21.422 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:36312/thread:1] (clientIp:, Scheme:) Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "UserLetters" (
    "Id" uuid NOT NULL,
    "SenderId" text,
    "ReceiverId" text NOT NULL,
    "LetterType" integer NOT NULL,
    "Content" text NOT NULL,
    "SentAt" timestamp with time zone NOT NULL,
    "ProcessedAt" timestamp with time zone,
    "IsHtml" boolean NOT NULL,
    "ExpireTime" timestamp with time zone NOT NULL,
    "IsRead" boolean NOT NULL,
    CONSTRAINT "PK_UserLetters" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_UserLetters_Users_ReceiverId" FOREIGN KEY ("ReceiverId") REFERENCES "Users" ("Id") ON DELETE CASCADE,
    CONSTRAINT "FK_UserLetters_Users_SenderId" FOREIGN KEY ("SenderId") REFERENCES "Users" ("Id") ON DELETE CASCADE
);
2025-03-27 21:33:21.429 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:36312/thread:1] (clientIp:, Scheme:) Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "UserGroupRoles" (
    "UserId" text NOT NULL,
    "GroupId" uuid NOT NULL,
    "RoleName" text NOT NULL,
    CONSTRAINT "PK_UserGroupRoles" PRIMARY KEY ("UserId", "GroupId", "RoleName"),
    CONSTRAINT "FK_UserGroupRoles_Groups_GroupId" FOREIGN KEY ("GroupId") REFERENCES "Groups" ("Id") ON DELETE CASCADE
);
2025-03-27 21:33:21.437 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:36312/thread:1] (clientIp:, Scheme:) Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "GroupMessages" (
    "Id" uuid NOT NULL,
    "GroupId" uuid NOT NULL,
    "SenderId" text NOT NULL,
    "CreatedAt" timestamp with time zone NOT NULL,
    "Content" text NOT NULL,
    "ReferenceId" uuid,
    CONSTRAINT "PK_GroupMessages" PRIMARY KEY ("GroupId", "Id"),
    CONSTRAINT "FK_GroupMessages_Groups_GroupId" FOREIGN KEY ("GroupId") REFERENCES "Groups" ("Id") ON DELETE CASCADE,
    CONSTRAINT "FK_GroupMessages_Message_ReferenceId" FOREIGN KEY ("ReferenceId") REFERENCES "Message" ("Id"),
    CONSTRAINT "FK_GroupMessages_Users_SenderId" FOREIGN KEY ("SenderId") REFERENCES "Users" ("Id") ON DELETE RESTRICT
);
2025-03-27 21:33:21.445 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:36312/thread:1] (clientIp:, Scheme:) Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "MessageReaction" (
    "MesssageId" uuid NOT NULL,
    "ReactionId" text NOT NULL,
    "MessageId" uuid,
    "ReactorIds" text[] NOT NULL,
    CONSTRAINT "PK_MessageReaction" PRIMARY KEY ("MesssageId", "ReactionId"),
    CONSTRAINT "FK_MessageReaction_Message_MessageId" FOREIGN KEY ("MessageId") REFERENCES "Message" ("Id"),
    CONSTRAINT "FK_MessageReaction_Reactions_ReactionId" FOREIGN KEY ("ReactionId") REFERENCES "Reactions" ("Id") ON DELETE CASCADE
);
2025-03-27 21:33:21.453 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:36312/thread:1] (clientIp:, Scheme:) Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE "GroupMessageReaction" (
    "MesssageId" uuid NOT NULL,
    "ReactionId" text NOT NULL,
    "GroupMessageGroupId" uuid,
    "GroupMessageId" uuid,
    "ReactorIds" text[] NOT NULL,
    CONSTRAINT "PK_GroupMessageReaction" PRIMARY KEY ("MesssageId", "ReactionId"),
    CONSTRAINT "FK_GroupMessageReaction_GroupMessages_GroupMessageGroupId_Grou~" FOREIGN KEY ("GroupMessageGroupId", "GroupMessageId") REFERENCES "GroupMessages" ("GroupId", "Id"),
    CONSTRAINT "FK_GroupMessageReaction_Reactions_ReactionId" FOREIGN KEY ("ReactionId") REFERENCES "Reactions" ("Id") ON DELETE CASCADE
);
2025-03-27 21:33:21.457 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:36312/thread:1] (clientIp:, Scheme:) Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO "GroupRoles" ("Role", "Description", "IsDefault", "IsSystem")
VALUES ('GroupLeader', 'GroupLeader', TRUE, TRUE);
INSERT INTO "GroupRoles" ("Role", "Description", "IsDefault", "IsSystem")
VALUES ('Guest', 'Guest', TRUE, TRUE);
INSERT INTO "GroupRoles" ("Role", "Descr2025-03-27 22:56:49.195 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:29356/thread:1] (clientIp:, Scheme:) Executed DbCommand (35ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='chat' AND
          c.relname='__EFMigrationsHistory'
)
2025-03-27 22:56:49.233 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:29356/thread:1] (clientIp:, Scheme:) Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM chat."__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-03-27 22:56:49.266 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:29356/thread:1] (clientIp:, Scheme:) Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='chat' AND
          c.relname='__EFMigrationsHistory'
)
2025-03-27 22:56:49.291 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:29356/thread:1] (clientIp:, Scheme:) Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='chat' AND
          c.relname='__EFMigrationsHistory'
)
2025-03-27 22:56:49.294 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:29356/thread:1] (clientIp:, Scheme:) Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM chat."__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-03-27 22:56:49.307 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:29356/thread:1] (clientIp:, Scheme:) Applying migration '20250327155639_Create_Database'.
2025-03-27 22:56:49.367 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:29356/thread:1] (clientIp:, Scheme:) Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DO $EF$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM pg_namespace WHERE nspname = 'chat') THEN
        CREATE SCHEMA chat;
    END IF;
END $EF$;
2025-03-27 22:56:49.376 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:29356/thread:1] (clientIp:, Scheme:) Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE chat."GroupRoles" (
    "Role" text NOT NULL,
    "Description" text NOT NULL,
    "IsDefault" boolean NOT NULL,
    "IsSystem" boolean NOT NULL,
    CONSTRAINT "PK_GroupRoles" PRIMARY KEY ("Role")
);
2025-03-27 22:56:49.383 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:29356/thread:1] (clientIp:, Scheme:) Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE chat."InboxMessages" (
    "Id" uuid NOT NULL,
    "Type" text NOT NULL,
    "Content" jsonb NOT NULL,
    "OccurredOnUtc" timestamp with time zone NOT NULL,
    "ProcessedOnUtc" timestamp with time zone,
    "Error" text,
    CONSTRAINT "PK_InboxMessages" PRIMARY KEY ("Id")
);
2025-03-27 22:56:49.389 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:29356/thread:1] (clientIp:, Scheme:) Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE chat."OutboxMessages" (
    "Id" uuid NOT NULL,
    "Type" text NOT NULL,
    "Content" jsonb NOT NULL,
    "OccurredOnUtc" timestamp with time zone NOT NULL,
    "ProcessedOnUtc" timestamp with time zone,
    "Error" text,
    CONSTRAINT "PK_OutboxMessages" PRIMARY KEY ("Id")
);
2025-03-27 22:56:49.396 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:29356/thread:1] (clientIp:, Scheme:) Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE chat."Reactions" (
    "Id" text NOT NULL,
    "ReactionDescription" text NOT NULL,
    "MimeType" text NOT NULL,
    "Value" text NOT NULL,
    "IsSystem" boolean NOT NULL,
    CONSTRAINT "PK_Reactions" PRIMARY KEY ("Id")
);
2025-03-27 22:56:49.402 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:29356/thread:1] (clientIp:, Scheme:) Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE chat."Users" (
    "Id" text NOT NULL,
    "Name" text NOT NULL,
    "Email" text NOT NULL,
    "IdentityId" character varying(100) NOT NULL,
    "AvatarUri" text NOT NULL,
    "CreatedAt" timestamp with time zone NOT NULL,
    "UpdatedAt" timestamp with time zone NOT NULL,
    "IsVerified" boolean NOT NULL,
    CONSTRAINT "PK_Users" PRIMARY KEY ("Id")
);
2025-03-27 22:56:49.410 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:29356/thread:1] (clientIp:, Scheme:) Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE chat."InboxMessageConsumers" (
    "InboxMessageId" uuid NOT NULL,
    "Name" text NOT NULL,
    CONSTRAINT "PK_InboxMessageConsumers" PRIMARY KEY ("InboxMessageId", "Name"),
    CONSTRAINT "FK_InboxMessageConsumers_InboxMessages_InboxMessageId" FOREIGN KEY ("InboxMessageId") REFERENCES chat."InboxMessages" ("Id") ON DELETE CASCADE
);
2025-03-27 22:56:49.417 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:29356/thread:1] (clientIp:, Scheme:) Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE chat."OutboxMessageConsumers" (
    "OutboxMessageId" uuid NOT NULL,
    "Name" text NOT NULL,
    CONSTRAINT "PK_OutboxMessageConsumers" PRIMARY KEY ("OutboxMessageId", "Name"),
    CONSTRAINT "FK_OutboxMessageConsumers_OutboxMessages_OutboxMessageId" FOREIGN KEY ("OutboxMessageId") REFERENCES chat."OutboxMessages" ("Id") ON DELETE CASCADE
);
2025-03-27 22:56:49.424 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:29356/thread:1] (clientIp:, Scheme:) Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE chat."Groups" (
    "Id" uuid NOT NULL,
    "Name" text NOT NULL,
    "CreatorId" text NOT NULL,
    "CreatedAt" timestamp with time zone NOT NULL,
    CONSTRAINT "PK_Groups" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_Groups_Users_CreatorId" FOREIGN KEY ("CreatorId") REFERENCES chat."Users" ("Id")
);
2025-03-27 22:56:49.431 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:29356/thread:1] (clientIp:, Scheme:) Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE chat."Message" (
    "Id" uuid NOT NULL,
    "SenderId" text NOT NULL,
    "ReceiverId" text NOT NULL,
    "Content" text NOT NULL,
    "ReferenceId" uuid,
    "RefrenceMessageId" uuid,
    "CreatedAt" timestamp with time zone NOT NULL,
    "DeletedAt" timestamp with time zone,
    CONSTRAINT "PK_Message" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_Message_Message_RefrenceMessageId" FOREIGN KEY ("RefrenceMessageId") REFERENCES chat."Message" ("Id"),
    CONSTRAINT "FK_Message_Users_SenderId" FOREIGN KEY ("SenderId") REFERENCES chat."Users" ("Id") ON DELETE CASCADE
);
2025-03-27 22:56:49.438 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:29356/thread:1] (clientIp:, Scheme:) Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE chat."UserFriends" (
    "UserId" text NOT NULL,
    "FriendId" text NOT NULL,
    CONSTRAINT "PK_UserFriends" PRIMARY KEY ("FriendId", "UserId"),
    CONSTRAINT "FK_UserFriends_Users_FriendId" FOREIGN KEY ("FriendId") REFERENCES chat."Users" ("Id") ON DELETE RESTRICT,
    CONSTRAINT "FK_UserFriends_Users_UserId" FOREIGN KEY ("UserId") REFERENCES chat."Users" ("Id") ON DELETE RESTRICT
);
2025-03-27 22:56:49.446 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:29356/thread:1] (clientIp:, Scheme:) Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE chat."UserLetters" (
    "Id" uuid NOT NULL,
    "SenderId" text,
    "ReceiverId" text NOT NULL,
    "LetterType" integer NOT NULL,
    "Content" text NOT NULL,
    "SentAt" timestamp with time zone NOT NULL,
    "ProcessedAt" timestamp with time zone,
    "IsHtml" boolean NOT NULL,
    "ExpireTime" timestamp with time zone NOT NULL,
    "IsRead" boolean NOT NULL,
    CONSTRAINT "PK_UserLetters" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_UserLetters_Users_ReceiverId" FOREIGN KEY ("ReceiverId") REFERENCES chat."Users" ("Id") ON DELETE CASCADE,
    CONSTRAINT "FK_UserLetters_Users_SenderId" FOREIGN KEY ("SenderId") REFERENCES chat."Users" ("Id") ON DELETE CASCADE
);
2025-03-27 22:56:49.453 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:29356/thread:1] (clientIp:, Scheme:) Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE chat."UserGroupRoles" (
    "UserId" text NOT NULL,
    "GroupId" uuid NOT NULL,
    "RoleName" text NOT NULL,
    CONSTRAINT "PK_UserGroupRoles" PRIMARY KEY ("UserId", "GroupId", "RoleName"),
    CONSTRAINT "FK_UserGroupRoles_Groups_GroupId" FOREIGN KEY ("GroupId") REFERENCES chat."Groups" ("Id") ON DELETE CASCADE
);
2025-03-27 22:56:49.460 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:29356/thread:1] (clientIp:, Scheme:) Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE chat."GroupMessages" (
    "Id" uuid NOT NULL,
    "GroupId" uuid NOT NULL,
    "SenderId" text NOT NULL,
    "CreatedAt" timestamp with time zone NOT NULL,
    "Content" text NOT NULL,
    "ReferenceId" uuid,
    CONSTRAINT "PK_GroupMessages" PRIMARY KEY ("GroupId", "Id"),
    CONSTRAINT "FK_GroupMessages_Groups_GroupId" FOREIGN KEY ("GroupId") REFERENCES chat."Groups" ("Id") ON DELETE CASCADE,
    CONSTRAINT "FK_GroupMessages_Message_ReferenceId" FOREIGN KEY ("ReferenceId") REFERENCES chat."Message" ("Id"),
    CONSTRAINT "FK_GroupMessages_Users_SenderId" FOREIGN KEY ("SenderId") REFERENCES chat."Users" ("Id") ON DELETE RESTRICT
);
2025-03-27 22:56:49.467 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:29356/thread:1] (clientIp:, Scheme:) Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE chat."MessageReaction" (
    "MesssageId" uuid NOT NULL,
    "ReactionId" text NOT NULL,
    "MessageId" uuid,
    "ReactorIds" text[] NOT NULL,
    CONSTRAINT "PK_MessageReaction" PRIMARY KEY ("MesssageId", "ReactionId"),
    CONSTRAINT "FK_MessageReaction_Message_MessageId" FOREIGN KEY ("MessageId") REFERENCES chat."Message" ("Id"),
    CONSTRAINT "FK_MessageReaction_Reactions_ReactionId" FOREIGN KEY ("ReactionId") REFERENCES chat."Reactions" ("Id") ON DELETE CASCADE
);
2025-03-27 22:56:49.475 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:29356/thread:1] (clientIp:, Scheme:) Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE chat."GroupMessageReaction" (
    "MesssageId" uuid NOT NULL,
    "ReactionId" text NOT NULL,
    "GroupMessageGroupId" uuid,
    "GroupMessageId" uuid,
    "ReactorIds" text[] NOT NULL,
    CONSTRAINT "PK_GroupMessageReaction" PRIMARY KEY ("MesssageId", "ReactionId"),
    CONSTRAINT "FK_GroupMessageReaction_GroupMessages_GroupMessageGroupId_Grou~" FOREIGN KEY ("GroupMessageGroupId", "GroupMessageId") REFERENCES chat."GroupMessages" ("GroupId", "Id"),
    CONSTRAINT "FK_GroupMessageReaction_Reactions_ReactionId" FOREIGN KEY ("ReactionId") REFERENCES chat."Reactions" ("Id") ON DELETE CASCADE
);
2025-03-27 22:56:49.481 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:29356/thread:1] (clientIp:, Scheme:) Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO chat."GroupRoles" 2025-03-27 23:05:49.552 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:39808/thread:1] (clientIp:, Scheme:) Executed DbCommand (35ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='chat' AND
          c.relname='__EFMigrationsHistory'
)
2025-03-27 23:05:49.609 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:39808/thread:1] (clientIp:, Scheme:) Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='chat' AND
          c.relname='__EFMigrationsHistory'
)
2025-03-27 23:05:49.693 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:39808/thread:1] (clientIp:, Scheme:) Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DO $EF$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM pg_namespace WHERE nspname = 'chat') THEN
        CREATE SCHEMA chat;
    END IF;
END $EF$;
CREATE TABLE chat."__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2025-03-27 23:05:49.720 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:39808/thread:1] (clientIp:, Scheme:) Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='chat' AND
          c.relname='__EFMigrationsHistory'
)
2025-03-27 23:05:49.725 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:39808/thread:1] (clientIp:, Scheme:) Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM chat."__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-03-27 23:05:49.740 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:39808/thread:1] (clientIp:, Scheme:) Applying migration '20250327160506_Create_Database'.
2025-03-27 23:05:49.795 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:39808/thread:1] (clientIp:, Scheme:) Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DO $EF$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM pg_namespace WHERE nspname = 'chat') THEN
        CREATE SCHEMA chat;
    END IF;
END $EF$;
2025-03-27 23:05:49.803 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:39808/thread:1] (clientIp:, Scheme:) Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE chat."GroupRoles" (
    "Role" text NOT NULL,
    "Description" text NOT NULL,
    "IsDefault" boolean NOT NULL,
    "IsSystem" boolean NOT NULL,
    CONSTRAINT "PK_GroupRoles" PRIMARY KEY ("Role")
);
2025-03-27 23:05:49.810 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:39808/thread:1] (clientIp:, Scheme:) Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE chat."InboxMessages" (
    "Id" uuid NOT NULL,
    "Type" text NOT NULL,
    "Content" jsonb NOT NULL,
    "OccurredOnUtc" timestamp with time zone NOT NULL,
    "ProcessedOnUtc" timestamp with time zone,
    "Error" text,
    CONSTRAINT "PK_InboxMessages" PRIMARY KEY ("Id")
);
2025-03-27 23:05:49.817 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:39808/thread:1] (clientIp:, Scheme:) Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE chat."OutboxMessages" (
    "Id" uuid NOT NULL,
    "Type" text NOT NULL,
    "Content" jsonb NOT NULL,
    "OccurredOnUtc" timestamp with time zone NOT NULL,
    "ProcessedOnUtc" timestamp with time zone,
    "Error" text,
    CONSTRAINT "PK_OutboxMessages" PRIMARY KEY ("Id")
);
2025-03-27 23:05:49.825 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:39808/thread:1] (clientIp:, Scheme:) Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE chat."Reactions" (
    "Id" text NOT NULL,
    "ReactionDescription" text NOT NULL,
    "MimeType" text NOT NULL,
    "Value" text NOT NULL,
    "IsSystem" boolean NOT NULL,
    CONSTRAINT "PK_Reactions" PRIMARY KEY ("Id")
);
2025-03-27 23:05:49.832 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:39808/thread:1] (clientIp:, Scheme:) Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE chat."Users" (
    "Id" text NOT NULL,
    "Name" text NOT NULL,
    "Email" text NOT NULL,
    "IdentityId" character varying(100) NOT NULL,
    "AvatarUri" text NOT NULL,
    "CreatedAt" timestamp with time zone NOT NULL,
    "UpdatedAt" timestamp with time zone NOT NULL,
    "IsVerified" boolean NOT NULL,
    CONSTRAINT "PK_Users" PRIMARY KEY ("Id")
);
2025-03-27 23:05:49.841 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:39808/thread:1] (clientIp:, Scheme:) Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE chat."InboxMessageConsumers" (
    "InboxMessageId" uuid NOT NULL,
    "Name" text NOT NULL,
    CONSTRAINT "PK_InboxMessageConsumers" PRIMARY KEY ("InboxMessageId", "Name"),
    CONSTRAINT "FK_InboxMessageConsumers_InboxMessages_InboxMessageId" FOREIGN KEY ("InboxMessageId") REFERENCES chat."InboxMessages" ("Id") ON DELETE CASCADE
);
2025-03-27 23:05:49.850 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:39808/thread:1] (clientIp:, Scheme:) Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE chat."OutboxMessageConsumers" (
    "OutboxMessageId" uuid NOT NULL,
    "Name" text NOT NULL,
    CONSTRAINT "PK_OutboxMessageConsumers" PRIMARY KEY ("OutboxMessageId", "Name"),
    CONSTRAINT "FK_OutboxMessageConsumers_OutboxMessages_OutboxMessageId" FOREIGN KEY ("OutboxMessageId") REFERENCES chat."OutboxMessages" ("Id") ON DELETE CASCADE
);
2025-03-27 23:05:49.858 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:39808/thread:1] (clientIp:, Scheme:) Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE chat."Groups" (
    "Id" uuid NOT NULL,
    "Name" text NOT NULL,
    "CreatorId" text NOT NULL,
    "CreatedAt" timestamp with time zone NOT NULL,
    CONSTRAINT "PK_Groups" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_Groups_Users_CreatorId" FOREIGN KEY ("CreatorId") REFERENCES chat."Users" ("Id")
);
2025-03-27 23:05:49.868 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:39808/thread:1] (clientIp:, Scheme:) Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE chat."Message" (
    "Id" uuid NOT NULL,
    "SenderId" text NOT NULL,
    "ReceiverId" text NOT NULL,
    "Content" text NOT NULL,
    "ReferenceId" uuid,
    "RefrenceMessageId" uuid,
    "CreatedAt" timestamp with time zone NOT NULL,
    "DeletedAt" timestamp with time zone,
    CONSTRAINT "PK_Message" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_Message_Message_RefrenceMessageId" FOREIGN KEY ("RefrenceMessageId") REFERENCES chat."Message" ("Id"),
    CONSTRAINT "FK_Message_Users_SenderId" FOREIGN KEY ("SenderId") REFERENCES chat."Users" ("Id") ON DELETE CASCADE
);
2025-03-27 23:05:49.875 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:39808/thread:1] (clientIp:, Scheme:) Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE chat."UserFriends" (
    "UserId" text NOT NULL,
    "FriendId" text NOT NULL,
    CONSTRAINT "PK_UserFriends" PRIMARY KEY ("FriendId", "UserId"),
    CONSTRAINT "FK_UserFriends_Users_FriendId" FOREIGN KEY ("FriendId") REFERENCES chat."Users" ("Id") ON DELETE RESTRICT,
    CONSTRAINT "FK_UserFriends_Users_UserId" FOREIGN KEY ("UserId") REFERENCES chat."Users" ("Id") ON DELETE RESTRICT
);
2025-03-27 23:05:49.886 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:39808/thread:1] (clientIp:, Scheme:) Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE chat."UserLetters" (
    "Id" uuid NOT NULL,
    "SenderId" text,
    "ReceiverId" text NOT NULL,
    "LetterType" integer NOT NULL,
    "Content" text NOT NULL,
    "SentAt" timestamp with time zone NOT NULL,
    "ProcessedAt" timestamp with time zone,
    "IsHtml" boolean NOT NULL,
    "ExpireTime" timestamp with time zone NOT NULL,
    "IsRead" boolean NOT NULL,
    CONSTRAINT "PK_UserLetters" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_UserLetters_Users_ReceiverId" FOREIGN KEY ("ReceiverId") REFERENCES chat."Users" ("Id") ON DELETE CASCADE,
    CONSTRAINT "FK_UserLetters_Users_SenderId" FOREIGN KEY ("SenderId") REFERENCES chat."Users" ("Id") ON DELETE CASCADE
);
2025-03-27 23:05:49.895 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:39808/thread:1] (clientIp:, Scheme:) Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE chat."UserGroupRoles" (
    "UserId" text NOT NULL,
    "GroupId" uuid NOT NULL,
    "RoleName" text NOT NULL,
    CONSTRAINT "PK_UserGroupRoles" PRIMARY KEY ("UserId", "GroupId", "RoleName"),
    CONSTRAINT "FK_UserGroupRoles_GroupRoles_RoleName" FOREIGN KEY ("RoleName") REFERENCES chat."GroupRoles" ("Role") ON DELETE SET NULL,
    CONSTRAINT "FK_UserGroupRoles_Groups_GroupId" FOREIGN KEY ("GroupId") REFERENCES chat."Groups" ("Id") ON DELETE CASCADE,
    CONSTRAINT "FK_UserGroupRoles_Users_UserId" FOREIGN KEY ("UserId") REFERENCES chat."Users" ("Id") ON DELETE CASCADE
);
2025-03-27 23:05:49.904 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:39808/thread:1] (clientIp:, Scheme:) Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE chat."GroupMessages" (
    "Id" uuid NOT NULL,
    "GroupId" uuid NOT NULL,
    "SenderId" text NOT NULL,
    "CreatedAt" timestamp with time zone NOT NULL,
    "Content" text NOT NULL,
    "ReferenceId" uuid,
    CONSTRAINT "PK_GroupMessages" PRIMARY KEY ("GroupId", "Id"),
    CONSTRAINT "FK_GroupMessages_Groups_GroupId" FOREIGN KEY ("GroupId") REFERENCES chat."Groups" ("Id") ON DELETE CASCADE,
    CONSTRAINT "FK_GroupMessages_Message_ReferenceId" FOREIGN KEY ("ReferenceId") REFERENCES chat."Message" ("Id"),
    CONSTRAINT "FK_GroupMessages_Users_SenderId" FOREIGN KEY ("SenderId") REFERENCES chat."Users" ("Id") ON DELETE RESTRICT
);
2025-03-27 23:05:49.911 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:39808/thread:1] (clientIp:, Scheme:) Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE chat."MessageReaction" (
    "MesssageId" uuid NOT NULL,
    "ReactionId" text NOT NULL,
    "MessageId" uuid,
    "ReactorIds" text[] NOT NULL,
    CONSTRAINT "PK_MessageReaction" PRIMARY KEY ("MesssageId", "ReactionId"),
    CONSTRAINT "FK_MessageReaction_Message_MessageId" FOREIGN KEY ("MessageId") REFERENCES chat."Message" ("Id"),
    CONSTRAINT "FK_MessageReaction_Reactions_ReactionId" FOREIGN KEY ("ReactionId") REFERENCES chat."Reactions" ("Id") ON DELETE CASCADE
);
2025-03-27 23:05:49.920 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:39808/thread:1] (clientIp:, Scheme:) Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE chat."GroupMessageReaction" (
    "MesssageId" uuid NOT NULL,
    "ReactionId" text NOT NULL,
    "GroupMessageGroupId" uuid,
    "GroupMessageId" uuid,
    "ReactorIds" text[] NOT NULL,
    CONSTRAINT "PK_GroupMessageReaction" PRIMARY KEY ("MesssageId", "ReactionId"),
    CONSTRAINT "FK_GroupMessageReaction_GroupMessages_GroupMessageGroupId_Grou~" FOREIGN KEY ("GroupMessageGroupId", "GroupMessageId") REFERENCES chat."GroupMessages" ("GroupId", "Id"),
    CONSTRAINT "FK_GroupMessageReaction_Reactions_ReactionId" FOREIGN KEY ("ReactionId") REFERENCES chat."Reactions" ("Id") ON DELETE CASCADE
);
2025-03-27 23:05:49.924 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:39808/thread:1] (clientIp:, Scheme:) Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO chat."GroupRoles" ("Role", "Description", "IsDefault", "IsSystem")
VALUES ('GroupLeader', 'GroupLeader', TRUE, TRUE);
INSERT INTO chat."GroupRoles" ("Role", "Description", "IsDefault", "IsSystem")
VALUES ('Guest', 'Guest', TRUE, TRUE);
INSERT INTO chat."GroupRoles" ("Role", "Description", "IsDefault", "IsSystem")
VALUES ('Member', 'Member', TRUE, TRUE);
2025-03-27 23:05:49.930 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:39808/thread:1] (clientIp:, Scheme:) Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_GroupMessageReaction_GroupMessageGroupId_GroupMessageId" ON chat."GroupMessageReaction" ("GroupMessageGroupId", "GroupMessageId");
2025-03-27 23:05:49.935 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:39808/thread:1] (clientIp:, Scheme:) Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_GroupMessageReaction_ReactionId" ON chat."GroupMessageReaction" ("ReactionId");
2025-03-27 23:05:49.939 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:39808/thread:1] (clientIp:, Scheme:) Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_GroupMessages_ReferenceId" ON chat."GroupMessages" ("ReferenceId");
2025-03-27 23:05:49.944 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:39808/thread:1] (clientIp:, Scheme:) Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_GroupMessages_SenderId" ON chat."GroupMessages" ("SenderId");
2025-03-27 23:05:49.949 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:39808/thread:1] (clientIp:, Scheme:) Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Groups_CreatorId" ON chat."Groups" ("CreatorId");
2025-03-27 23:05:49.953 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:39808/thread:1] (clientIp:, Scheme:) Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Message_RefrenceMessageId" ON chat."Message" ("RefrenceMessageId");
2025-03-27 23:05:49.958 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:39808/thread:1] (clientIp:, Scheme:) Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Message_SenderId" ON chat."Message" ("SenderId");
2025-03-27 23:05:49.962 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:39808/thread:1] (clientIp:, Scheme:) Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_MessageReaction_MessageId" ON chat."MessageReaction" ("MessageId");
2025-03-27 23:05:49.966 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:39808/thread:1] (clientIp:, Scheme:) Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_MessageReaction_ReactionId" ON chat."MessageReaction" ("ReactionId");
2025-03-27 23:05:49.971 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:39808/thread:1] (clientIp:, Scheme:) Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_UserFriends_UserId" ON chat."UserFriends" ("UserId");
2025-03-27 23:05:49.976 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:39808/thread:1] (clientIp:, Scheme:) Executed DbComm2025-03-27 23:10:38.826 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:56244/thread:1] (clientIp:, Scheme:) Executed DbCommand (37ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='chat' AND
          c.relname='__EFMigrationsHistory'
)
2025-03-27 23:10:38.886 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:56244/thread:1] (clientIp:, Scheme:) Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='chat' AND
          c.relname='__EFMigrationsHistory'
)
2025-03-27 23:10:38.976 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:56244/thread:1] (clientIp:, Scheme:) Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DO $EF$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM pg_namespace WHERE nspname = 'chat') THEN
        CREATE SCHEMA chat;
    END IF;
END $EF$;
CREATE TABLE chat."__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2025-03-27 23:10:39.009 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:56244/thread:1] (clientIp:, Scheme:) Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='chat' AND
          c.relname='__EFMigrationsHistory'
)
2025-03-27 23:10:39.016 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:56244/thread:1] (clientIp:, Scheme:) Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM chat."__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-03-27 23:10:39.034 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:56244/thread:1] (clientIp:, Scheme:) Applying migration '20250327161016_Create_Database'.
2025-03-27 23:10:39.094 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:56244/thread:1] (clientIp:, Scheme:) Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DO $EF$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM pg_namespace WHERE nspname = 'chat') THEN
        CREATE SCHEMA chat;
    END IF;
END $EF$;
2025-03-27 23:10:39.105 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:56244/thread:1] (clientIp:, Scheme:) Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE chat."GroupRoles" (
    "Role" text NOT NULL,
    "Description" text NOT NULL,
    "IsDefault" boolean NOT NULL,
    "IsSystem" boolean NOT NULL,
    CONSTRAINT "PK_GroupRoles" PRIMARY KEY ("Role")
);
2025-03-27 23:10:39.115 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:56244/thread:1] (clientIp:, Scheme:) Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE chat."InboxMessages" (
    "Id" uuid NOT NULL,
    "Type" text NOT NULL,
    "Content" jsonb NOT NULL,
    "OccurredOnUtc" timestamp with time zone NOT NULL,
    "ProcessedOnUtc" timestamp with time zone,
    "Error" text,
    CONSTRAINT "PK_InboxMessages" PRIMARY KEY ("Id")
);
2025-03-27 23:10:39.125 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:56244/thread:1] (clientIp:, Scheme:) Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE chat."OutboxMessages" (
    "Id" uuid NOT NULL,
    "Type" text NOT NULL,
    "Content" jsonb NOT NULL,
    "OccurredOnUtc" timestamp with time zone NOT NULL,
    "ProcessedOnUtc" timestamp with time zone,
    "Error" text,
    CONSTRAINT "PK_OutboxMessages" PRIMARY KEY ("Id")
);
2025-03-27 23:10:39.133 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:56244/thread:1] (clientIp:, Scheme:) Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE chat."Reactions" (
    "Id" text NOT NULL,
    "ReactionDescription" text NOT NULL,
    "MimeType" text NOT NULL,
    "Value" text NOT NULL,
    "IsSystem" boolean NOT NULL,
    CONSTRAINT "PK_Reactions" PRIMARY KEY ("Id")
);
2025-03-27 23:10:39.141 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:56244/thread:1] (clientIp:, Scheme:) Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE chat."Users" (
    "Id" text NOT NULL,
    "Name" text NOT NULL,
    "Email" text NOT NULL,
    "IdentityId" character varying(100) NOT NULL,
    "AvatarUri" text NOT NULL,
    "CreatedAt" timestamp with time zone NOT NULL,
    "UpdatedAt" timestamp with time zone NOT NULL,
    "IsVerified" boolean NOT NULL,
    CONSTRAINT "PK_Users" PRIMARY KEY ("Id")
);
2025-03-27 23:10:39.152 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:56244/thread:1] (clientIp:, Scheme:) Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE chat."InboxMessageConsumers" (
    "InboxMessageId" uuid NOT NULL,
    "Name" text NOT NULL,
    CONSTRAINT "PK_InboxMessageConsumers" PRIMARY KEY ("InboxMessageId", "Name"),
    CONSTRAINT "FK_InboxMessageConsumers_InboxMessages_InboxMessageId" FOREIGN KEY ("InboxMessageId") REFERENCES chat."InboxMessages" ("Id") ON DELETE CASCADE
);
2025-03-27 23:10:39.159 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:56244/thread:1] (clientIp:, Scheme:) Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE chat."OutboxMessageConsumers" (
    "OutboxMessageId" uuid NOT NULL,
    "Name" text NOT NULL,
    CONSTRAINT "PK_OutboxMessageConsumers" PRIMARY KEY ("OutboxMessageId", "Name"),
    CONSTRAINT "FK_OutboxMessageConsumers_OutboxMessages_OutboxMessageId" FOREIGN KEY ("OutboxMessageId") REFERENCES chat."OutboxMessages" ("Id") ON DELETE CASCADE
);
2025-03-27 23:10:39.167 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:56244/thread:1] (clientIp:, Scheme:) Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE chat."Groups" (
    "Id" uuid NOT NULL,
    "Name" text NOT NULL,
    "CreatorId" text NOT NULL,
    "CreatedAt" timestamp with time zone NOT NULL,
    CONSTRAINT "PK_Groups" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_Groups_Users_CreatorId" FOREIGN KEY ("CreatorId") REFERENCES chat."Users" ("Id")
);
2025-03-27 23:10:39.176 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:56244/thread:1] (clientIp:, Scheme:) Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE chat."Message" (
    "Id" uuid NOT NULL,
    "SenderId" text NOT NULL,
    "ReceiverId" text NOT NULL,
    "Content" text NOT NULL,
    "ReferenceId" uuid,
    "RefrenceMessageId" uuid,
    "CreatedAt" timestamp with time zone NOT NULL,
    "DeletedAt" timestamp with time zone,
    CONSTRAINT "PK_Message" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_Message_Message_RefrenceMessageId" FOREIGN KEY ("RefrenceMessageId") REFERENCES chat."Message" ("Id"),
    CONSTRAINT "FK_Message_Users_SenderId" FOREIGN KEY ("SenderId") REFERENCES chat."Users" ("Id") ON DELETE CASCADE
);
2025-03-27 23:10:39.184 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:56244/thread:1] (clientIp:, Scheme:) Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE chat."UserFriends" (
    "UserId" text NOT NULL,
    "FriendId" text NOT NULL,
    CONSTRAINT "PK_UserFriends" PRIMARY KEY ("FriendId", "UserId"),
    CONSTRAINT "FK_UserFriends_Users_FriendId" FOREIGN KEY ("FriendId") REFERENCES chat."Users" ("Id") ON DELETE RESTRICT,
    CONSTRAINT "FK_UserFriends_Users_UserId" FOREIGN KEY ("UserId") REFERENCES chat."Users" ("Id") ON DELETE RESTRICT
);
2025-03-27 23:10:39.193 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:56244/thread:1] (clientIp:, Scheme:) Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE chat."UserLetters" (
    "Id" uuid NOT NULL,
    "SenderId" text,
    "ReceiverId" text NOT NULL,
    "LetterType" integer NOT NULL,
    "Content" text NOT NULL,
    "SentAt" timestamp with time zone NOT NULL,
    "ProcessedAt" timestamp with time zone,
    "IsHtml" boolean NOT NULL,
    "ExpireTime" timestamp with time zone NOT NULL,
    "IsRead" boolean NOT NULL,
    CONSTRAINT "PK_UserLetters" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_UserLetters_Users_ReceiverId" FOREIGN KEY ("ReceiverId") REFERENCES chat."Users" ("Id") ON DELETE CASCADE,
    CONSTRAINT "FK_UserLetters_Users_SenderId" FOREIGN KEY ("SenderId") REFERENCES chat."Users" ("Id") ON DELETE CASCADE
);
2025-03-27 23:10:39.201 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:56244/thread:1] (clientIp:, Scheme:) Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE chat."UserGroupRoles" (
    "UserId" text NOT NULL,
    "GroupId" uuid NOT NULL,
    "RoleName" text NOT NULL,
    CONSTRAINT "PK_UserGroupRoles" PRIMARY KEY ("UserId", "GroupId", "RoleName"),
    CONSTRAINT "FK_UserGroupRoles_GroupRoles_RoleName" FOREIGN KEY ("RoleName") REFERENCES chat."GroupRoles" ("Role") ON DELETE SET NULL,
    CONSTRAINT "FK_UserGroupRoles_Groups_GroupId" FOREIGN KEY ("GroupId") REFERENCES chat."Groups" ("Id") ON DELETE CASCADE,
    CONSTRAINT "FK_UserGroupRoles_Users_UserId" FOREIGN KEY ("UserId") REFERENCES chat."Users" ("Id") ON DELETE CASCADE
);
2025-03-27 23:10:39.209 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:56244/thread:1] (clientIp:, Scheme:) Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE chat."GroupMessage" (
    "Id" uuid NOT NULL,
    "GroupId" uuid NOT NULL,
    "SenderId" text NOT NULL,
    "CreatedAt" timestamp with time zone NOT NULL,
    "Content" text NOT NULL,
    "ReferenceId" uuid,
    CONSTRAINT "PK_GroupMessage" PRIMARY KEY ("GroupId", "Id"),
    CONSTRAINT "FK_GroupMessage_Groups_GroupId" FOREIGN KEY ("GroupId") REFERENCES chat."Groups" ("Id") ON DELETE CASCADE,
    CONSTRAINT "FK_GroupMessage_Message_ReferenceId" FOREIGN KEY ("ReferenceId") REFERENCES chat."Message" ("Id"),
    CONSTRAINT "FK_GroupMessage_Users_SenderId" FOREIGN KEY ("SenderId") REFERENCES chat."Users" ("Id") ON DELETE RESTRICT
);
2025-03-27 23:10:39.217 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:56244/thread:1] (clientIp:, Scheme:) Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE chat."MessageReaction" (
    "MesssageId" uuid NOT NULL,
    "ReactionId" text NOT NULL,
    "MessageId" uuid,
    "ReactorIds" text[] NOT NULL,
    CONSTRAINT "PK_MessageReaction" PRIMARY KEY ("MesssageId", "ReactionId"),
    CONSTRAINT "FK_MessageReaction_Message_MessageId" FOREIGN KEY ("MessageId") REFERENCES chat."Message" ("Id"),
    CONSTRAINT "FK_MessageReaction_Reactions_ReactionId" FOREIGN KEY ("ReactionId") REFERENCES chat."Reactions" ("Id") ON DELETE CASCADE
);
2025-03-27 23:10:39.226 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:56244/thread:1] (clientIp:, Scheme:) Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE chat."GroupMessageReaction" (
    "MesssageId" uuid NOT NULL,
    "ReactionId" text NOT NULL,
    "GroupMessageGroupId" uuid,
    "GroupMessageId" uuid,
    "ReactorIds" text[] NOT NULL,
    CONSTRAINT "PK_GroupMessageReaction" PRIMARY KEY ("MesssageId", "ReactionId"),
    CONSTRAINT "FK_GroupMessageReaction_GroupMessage_GroupMessageGroupId_Group~" FOREIGN KEY ("GroupMessageGroupId", "GroupMessageId") REFERENCES chat."GroupMessage" ("GroupId", "Id"),
    CONSTRAINT "FK_GroupMessageReaction_Reactions_ReactionId" FOREIGN KEY ("ReactionId") REFERENCES chat."Reactions" ("Id") ON DELETE CASCADE
);
2025-03-27 23:10:39.230 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:56244/thread:1] (clientIp:, Scheme:) Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO chat."GroupRoles" ("Role", "Description", "IsDefault", "IsSystem")
VALUES ('GroupLeader', 'GroupLeader', TRUE, TRUE);
INSERT INTO chat."GroupRoles" ("Role", "Description", "IsDefault", "IsSystem")
VALUES ('Guest', 'Guest', TRUE, TRUE);
INSERT INTO chat."GroupRoles" ("Role", "Description", "IsDefault", "IsSystem")
VALUES ('Member', 'Member', TRUE, TRUE);
2025-03-27 23:10:39.234 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:56244/thread:1] (clientIp:, Scheme:) Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_GroupMessage_ReferenceId" ON chat."GroupMessage" ("ReferenceId");
2025-03-27 23:10:39.239 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:56244/thread:1] (clientIp:, Scheme:) Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_GroupMessage_SenderId" ON chat."GroupMessage" ("SenderId");
2025-03-27 23:10:39.243 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:56244/thread:1] (clientIp:, Scheme:) Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_GroupMessageReaction_GroupMessageGroupId_GroupMessageId" ON chat."GroupMessageReaction" ("GroupMessageGroupId", "GroupMessageId");
2025-03-27 23:10:39.247 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:56244/thread:1] (clientIp:, Scheme:) Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_GroupMessageReaction_ReactionId" ON chat."GroupMessageReaction" ("ReactionId");
2025-03-27 23:10:39.252 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:56244/thread:1] (clientIp:, Scheme:) Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Groups_CreatorId" ON chat."Groups" ("CreatorId");
2025-03-27 23:10:39.257 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:56244/thread:1] (clientIp:, Scheme:) Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Message_RefrenceMessageId" ON chat."Message" ("RefrenceMessageId");
2025-03-27 23:10:39.261 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:56244/thread:1] (clientIp:, Scheme:) Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Message_SenderId" ON chat."Message" ("SenderId");
2025-03-27 23:10:39.265 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:56244/thread:1] (clientIp:, Scheme:) Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_MessageReaction_MessageId" ON chat."MessageReaction" ("MessageId");
2025-03-27 23:10:39.269 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:56244/thread:1] (clientIp:, Scheme:) Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_MessageReaction_ReactionId" ON chat."MessageReaction" ("ReactionId");
2025-03-27 23:10:39.274 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:56244/thread:1] (clientIp:, Scheme:) Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_UserFriends_UserId" ON chat."UserFriends" ("UserId");
2025-03-27 23:10:39.278 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:56244/thread:1] (clientIp:, Scheme:) Executed DbCommand (2ms) 2025-03-27 23:21:21.359 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:21412/thread:1] (clientIp:, Scheme:) Executed DbCommand (33ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='chat' AND
          c.relname='__EFMigrationsHistory'
)
2025-03-27 23:21:21.419 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:21412/thread:1] (clientIp:, Scheme:) Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='chat' AND
          c.relname='__EFMigrationsHistory'
)
2025-03-27 23:21:21.497 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:21412/thread:1] (clientIp:, Scheme:) Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DO $EF$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM pg_namespace WHERE nspname = 'chat') THEN
        CREATE SCHEMA chat;
    END IF;
END $EF$;
CREATE TABLE chat."__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2025-03-27 23:21:21.523 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:21412/thread:1] (clientIp:, Scheme:) Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='chat' AND
          c.relname='__EFMigrationsHistory'
)
2025-03-27 23:21:21.528 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:21412/thread:1] (clientIp:, Scheme:) Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM chat."__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-03-27 23:21:21.542 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:21412/thread:1] (clientIp:, Scheme:) Applying migration '20250327162111_Create_Database'.
2025-03-27 23:21:21.595 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:21412/thread:1] (clientIp:, Scheme:) Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DO $EF$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM pg_namespace WHERE nspname = 'chat') THEN
        CREATE SCHEMA chat;
    END IF;
END $EF$;
2025-03-27 23:21:21.602 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:21412/thread:1] (clientIp:, Scheme:) Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE chat."GroupRoles" (
    "Role" text NOT NULL,
    "Description" text NOT NULL,
    "IsDefault" boolean NOT NULL,
    "IsSystem" boolean NOT NULL,
    CONSTRAINT "PK_GroupRoles" PRIMARY KEY ("Role")
);
2025-03-27 23:21:21.609 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:21412/thread:1] (clientIp:, Scheme:) Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE chat."InboxMessages" (
    "Id" uuid NOT NULL,
    "Type" text NOT NULL,
    "Content" jsonb NOT NULL,
    "OccurredOnUtc" timestamp with time zone NOT NULL,
    "ProcessedOnUtc" timestamp with time zone,
    "Error" text,
    CONSTRAINT "PK_InboxMessages" PRIMARY KEY ("Id")
);
2025-03-27 23:21:21.615 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:21412/thread:1] (clientIp:, Scheme:) Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE chat."OutboxMessages" (
    "Id" uuid NOT NULL,
    "Type" text NOT NULL,
    "Content" jsonb NOT NULL,
    "OccurredOnUtc" timestamp with time zone NOT NULL,
    "ProcessedOnUtc" timestamp with time zone,
    "Error" text,
    CONSTRAINT "PK_OutboxMessages" PRIMARY KEY ("Id")
);
2025-03-27 23:21:21.623 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:21412/thread:1] (clientIp:, Scheme:) Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE chat."Reactions" (
    "Id" text NOT NULL,
    "ReactionDescription" text NOT NULL,
    "MimeType" text NOT NULL,
    "Value" text NOT NULL,
    "IsSystem" boolean NOT NULL,
    CONSTRAINT "PK_Reactions" PRIMARY KEY ("Id")
);
2025-03-27 23:21:21.631 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:21412/thread:1] (clientIp:, Scheme:) Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE chat."Users" (
    "Id" text NOT NULL,
    "Name" text NOT NULL,
    "Email" text NOT NULL,
    "IdentityId" character varying(100) NOT NULL,
    "AvatarUri" text NOT NULL,
    "CreatedAt" timestamp with time zone NOT NULL,
    "UpdatedAt" timestamp with time zone NOT NULL,
    "IsVerified" boolean NOT NULL,
    CONSTRAINT "PK_Users" PRIMARY KEY ("Id")
);
2025-03-27 23:21:21.639 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:21412/thread:1] (clientIp:, Scheme:) Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE chat."InboxMessageConsumers" (
    "InboxMessageId" uuid NOT NULL,
    "Name" text NOT NULL,
    CONSTRAINT "PK_InboxMessageConsumers" PRIMARY KEY ("InboxMessageId", "Name"),
    CONSTRAINT "FK_InboxMessageConsumers_InboxMessages_InboxMessageId" FOREIGN KEY ("InboxMessageId") REFERENCES chat."InboxMessages" ("Id") ON DELETE CASCADE
);
2025-03-27 23:21:21.646 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:21412/thread:1] (clientIp:, Scheme:) Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE chat."OutboxMessageConsumers" (
    "OutboxMessageId" uuid NOT NULL,
    "Name" text NOT NULL,
    CONSTRAINT "PK_OutboxMessageConsumers" PRIMARY KEY ("OutboxMessageId", "Name"),
    CONSTRAINT "FK_OutboxMessageConsumers_OutboxMessages_OutboxMessageId" FOREIGN KEY ("OutboxMessageId") REFERENCES chat."OutboxMessages" ("Id") ON DELETE CASCADE
);
2025-03-27 23:21:21.654 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:21412/thread:1] (clientIp:, Scheme:) Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE chat."Groups" (
    "Id" uuid NOT NULL,
    "Name" text NOT NULL,
    "CreatorId" text NOT NULL,
    "CreatedAt" timestamp with time zone NOT NULL,
    CONSTRAINT "PK_Groups" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_Groups_Users_CreatorId" FOREIGN KEY ("CreatorId") REFERENCES chat."Users" ("Id")
);
2025-03-27 23:21:21.661 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:21412/thread:1] (clientIp:, Scheme:) Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE chat."Message" (
    "Id" uuid NOT NULL,
    "SenderId" text NOT NULL,
    "ReceiverId" text NOT NULL,
    "Content" text NOT NULL,
    "ReferenceId" uuid,
    "RefrenceMessageId" uuid,
    "CreatedAt" timestamp with time zone NOT NULL,
    "DeletedAt" timestamp with time zone,
    CONSTRAINT "PK_Message" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_Message_Message_RefrenceMessageId" FOREIGN KEY ("RefrenceMessageId") REFERENCES chat."Message" ("Id"),
    CONSTRAINT "FK_Message_Users_SenderId" FOREIGN KEY ("SenderId") REFERENCES chat."Users" ("Id") ON DELETE CASCADE
);
2025-03-27 23:21:21.668 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:21412/thread:1] (clientIp:, Scheme:) Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE chat."UserFriends" (
    "UserId" text NOT NULL,
    "FriendId" text NOT NULL,
    CONSTRAINT "PK_UserFriends" PRIMARY KEY ("FriendId", "UserId"),
    CONSTRAINT "FK_UserFriends_Users_FriendId" FOREIGN KEY ("FriendId") REFERENCES chat."Users" ("Id") ON DELETE RESTRICT,
    CONSTRAINT "FK_UserFriends_Users_UserId" FOREIGN KEY ("UserId") REFERENCES chat."Users" ("Id") ON DELETE RESTRICT
);
2025-03-27 23:21:21.675 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:21412/thread:1] (clientIp:, Scheme:) Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE chat."UserLetters" (
    "Id" uuid NOT NULL,
    "SenderId" text,
    "ReceiverId" text NOT NULL,
    "LetterType" integer NOT NULL,
    "Content" text NOT NULL,
    "SentAt" timestamp with time zone NOT NULL,
    "ProcessedAt" timestamp with time zone,
    "IsHtml" boolean NOT NULL,
    "ExpireTime" timestamp with time zone NOT NULL,
    "IsRead" boolean NOT NULL,
    CONSTRAINT "PK_UserLetters" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_UserLetters_Users_ReceiverId" FOREIGN KEY ("ReceiverId") REFERENCES chat."Users" ("Id") ON DELETE CASCADE,
    CONSTRAINT "FK_UserLetters_Users_SenderId" FOREIGN KEY ("SenderId") REFERENCES chat."Users" ("Id") ON DELETE CASCADE
);
2025-03-27 23:21:21.684 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:21412/thread:1] (clientIp:, Scheme:) Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE chat."GroupMessage" (
    "Id" uuid NOT NULL,
    "GroupId" uuid NOT NULL,
    "SenderId" text NOT NULL,
    "CreatedAt" timestamp with time zone NOT NULL,
    "Content" text NOT NULL,
    "ReferenceId" uuid,
    "RefrenceMessageId" uuid,
    CONSTRAINT "PK_GroupMessage" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_GroupMessage_GroupMessage_ReferenceId" FOREIGN KEY ("ReferenceId") REFERENCES chat."GroupMessage" ("Id"),
    CONSTRAINT "FK_GroupMessage_GroupMessage_RefrenceMessageId" FOREIGN KEY ("RefrenceMessageId") REFERENCES chat."GroupMessage" ("Id"),
    CONSTRAINT "FK_GroupMessage_Groups_GroupId" FOREIGN KEY ("GroupId") REFERENCES chat."Groups" ("Id") ON DELETE CASCADE,
    CONSTRAINT "FK_GroupMessage_Users_SenderId" FOREIGN KEY ("SenderId") REFERENCES chat."Users" ("Id") ON DELETE RESTRICT
);
2025-03-27 23:21:21.692 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:21412/thread:1] (clientIp:, Scheme:) Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE chat."UserGroupRoles" (
    "UserId" text NOT NULL,
    "GroupId" uuid NOT NULL,
    "RoleName" text NOT NULL,
    CONSTRAINT "PK_UserGroupRoles" PRIMARY KEY ("UserId", "GroupId", "RoleName"),
    CONSTRAINT "FK_UserGroupRoles_GroupRoles_RoleName" FOREIGN KEY ("RoleName") REFERENCES chat."GroupRoles" ("Role") ON DELETE SET NULL,
    CONSTRAINT "FK_UserGroupRoles_Groups_GroupId" FOREIGN KEY ("GroupId") REFERENCES chat."Groups" ("Id") ON DELETE CASCADE,
    CONSTRAINT "FK_UserGroupRoles_Users_UserId" FOREIGN KEY ("UserId") REFERENCES chat."Users" ("Id") ON DELETE CASCADE
);
2025-03-27 23:21:21.699 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:21412/thread:1] (clientIp:, Scheme:) Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE chat."MessageReaction" (
    "MesssageId" uuid NOT NULL,
    "ReactionId" text NOT NULL,
    "MessageId" uuid,
    "ReactorIds" text[] NOT NULL,
    CONSTRAINT "PK_MessageReaction" PRIMARY KEY ("MesssageId", "ReactionId"),
    CONSTRAINT "FK_MessageReaction_Message_MessageId" FOREIGN KEY ("MessageId") REFERENCES chat."Message" ("Id"),
    CONSTRAINT "FK_MessageReaction_Reactions_ReactionId" FOREIGN KEY ("ReactionId") REFERENCES chat."Reactions" ("Id") ON DELETE CASCADE
);
2025-03-27 23:21:21.707 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:21412/thread:1] (clientIp:, Scheme:) Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE chat."GroupMessageReaction" (
    "MesssageId" uuid NOT NULL,
    "ReactionId" text NOT NULL,
    "GroupMessageId" uuid,
    "ReactorIds" text[] NOT NULL,
    CONSTRAINT "PK_GroupMessageReaction" PRIMARY KEY ("MesssageId", "ReactionId"),
    CONSTRAINT "FK_GroupMessageReaction_GroupMessage_GroupMessageId" FOREIGN KEY ("GroupMessageId") REFERENCES chat."GroupMessage" ("Id"),
    CONSTRAINT "FK_GroupMessageReaction_Reactions_ReactionId" FOREIGN KEY ("ReactionId") REFERENCES chat."Reactions" ("Id") ON DELETE CASCADE
);
2025-03-27 23:21:21.712 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:21412/thread:1] (clientIp:, Scheme:) Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO chat."GroupRoles" ("Role", "Description", "IsDefault", "IsSystem")
VALUES ('GroupLeader', 'GroupLeader', TRUE, TRUE);
INSERT INTO chat."GroupRoles" ("Role", "Description", "IsDefault", "IsSystem")
VALUES ('Guest', 'Guest', TRUE, TRUE);
INSERT INTO chat."GroupRoles" ("Role", "Description", "IsDefault", "IsSystem")
VALUES ('Member', 'Member', TRUE, TRUE);
2025-03-27 23:21:21.716 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:21412/thread:1] (clientIp:, Scheme:) Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_GroupMessage_GroupId" ON chat."GroupMessage" ("GroupId");
2025-03-27 23:21:21.721 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:21412/thread:1] (clientIp:, Scheme:) Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_GroupMessage_Id_GroupId" ON chat."GroupMessage" ("Id", "GroupId");
2025-03-27 23:21:21.726 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:21412/thread:1] (clientIp:, Scheme:) Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_GroupMessage_ReferenceId" ON chat."GroupMessage" ("ReferenceId");
2025-03-27 23:21:21.731 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:21412/thread:1] (clientIp:, Scheme:) Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_GroupMessage_RefrenceMessageId" ON chat."GroupMessage" ("RefrenceMessageId");
2025-03-27 23:21:21.736 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:21412/thread:1] (clientIp:, Scheme:) Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_GroupMessage_SenderId" ON chat."GroupMessage" ("SenderId");
2025-03-27 23:21:21.740 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:21412/thread:1] (clientIp:, Scheme:) Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_GroupMessageReaction_GroupMessageId" ON chat."GroupMessageReaction" ("GroupMessageId");
2025-03-27 23:21:21.745 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:21412/thread:1] (clientIp:, Scheme:) Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_GroupMessageReaction_ReactionId" ON chat."GroupMessageReaction" ("ReactionId");
2025-03-27 23:21:21.749 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:21412/thread:1] (clientIp:, Scheme:) Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Groups_CreatorId" ON chat."Groups" ("CreatorId");
2025-03-27 23:21:21.754 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:21412/thread:1] (clientIp:, Scheme:) Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Message_RefrenceMessageId" ON chat."Message" ("RefrenceMessageId");
2025-03-27 23:21:21.758 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:21412/thread:1] (clientIp:, Scheme:) Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Message_SenderId" ON chat."Message" ("SenderId");
2025-03-27 23:21:21.762 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Proces2025-03-27 23:26:17.872 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:58312/thread:1] (clientIp:, Scheme:) Executed DbCommand (34ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='chat' AND
          c.relname='__EFMigrationsHistory'
)
2025-03-27 23:26:17.936 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:58312/thread:1] (clientIp:, Scheme:) Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='chat' AND
          c.relname='__EFMigrationsHistory'
)
2025-03-27 23:26:18.024 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:58312/thread:1] (clientIp:, Scheme:) Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DO $EF$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM pg_namespace WHERE nspname = 'chat') THEN
        CREATE SCHEMA chat;
    END IF;
END $EF$;
CREATE TABLE chat."__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2025-03-27 23:26:18.051 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:58312/thread:1] (clientIp:, Scheme:) Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='chat' AND
          c.relname='__EFMigrationsHistory'
)
2025-03-27 23:26:18.056 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:58312/thread:1] (clientIp:, Scheme:) Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM chat."__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-03-27 23:26:18.072 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:58312/thread:1] (clientIp:, Scheme:) Applying migration '20250327162606_Create_Database'.
2025-03-27 23:26:18.127 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:58312/thread:1] (clientIp:, Scheme:) Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DO $EF$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM pg_namespace WHERE nspname = 'chat') THEN
        CREATE SCHEMA chat;
    END IF;
END $EF$;
2025-03-27 23:26:18.134 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:58312/thread:1] (clientIp:, Scheme:) Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE chat."GroupRoles" (
    "Role" text NOT NULL,
    "Description" text NOT NULL,
    "IsDefault" boolean NOT NULL,
    "IsSystem" boolean NOT NULL,
    CONSTRAINT "PK_GroupRoles" PRIMARY KEY ("Role")
);
2025-03-27 23:26:18.141 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:58312/thread:1] (clientIp:, Scheme:) Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE chat."InboxMessages" (
    "Id" uuid NOT NULL,
    "Type" text NOT NULL,
    "Content" jsonb NOT NULL,
    "OccurredOnUtc" timestamp with time zone NOT NULL,
    "ProcessedOnUtc" timestamp with time zone,
    "Error" text,
    CONSTRAINT "PK_InboxMessages" PRIMARY KEY ("Id")
);
2025-03-27 23:26:18.147 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:58312/thread:1] (clientIp:, Scheme:) Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE chat."OutboxMessages" (
    "Id" uuid NOT NULL,
    "Type" text NOT NULL,
    "Content" jsonb NOT NULL,
    "OccurredOnUtc" timestamp with time zone NOT NULL,
    "ProcessedOnUtc" timestamp with time zone,
    "Error" text,
    CONSTRAINT "PK_OutboxMessages" PRIMARY KEY ("Id")
);
2025-03-27 23:26:18.153 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:58312/thread:1] (clientIp:, Scheme:) Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE chat."Reactions" (
    "Id" text NOT NULL,
    "ReactionDescription" text NOT NULL,
    "MimeType" text NOT NULL,
    "Value" text NOT NULL,
    "IsSystem" boolean NOT NULL,
    CONSTRAINT "PK_Reactions" PRIMARY KEY ("Id")
);
2025-03-27 23:26:18.159 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:58312/thread:1] (clientIp:, Scheme:) Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE chat."Users" (
    "Id" text NOT NULL,
    "Name" text NOT NULL,
    "Email" text NOT NULL,
    "IdentityId" character varying(100) NOT NULL,
    "AvatarUri" text NOT NULL,
    "CreatedAt" timestamp with time zone NOT NULL,
    "UpdatedAt" timestamp with time zone NOT NULL,
    "IsVerified" boolean NOT NULL,
    CONSTRAINT "PK_Users" PRIMARY KEY ("Id")
);
2025-03-27 23:26:18.166 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:58312/thread:1] (clientIp:, Scheme:) Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE chat."InboxMessageConsumers" (
    "InboxMessageId" uuid NOT NULL,
    "Name" text NOT NULL,
    CONSTRAINT "PK_InboxMessageConsumers" PRIMARY KEY ("InboxMessageId", "Name"),
    CONSTRAINT "FK_InboxMessageConsumers_InboxMessages_InboxMessageId" FOREIGN KEY ("InboxMessageId") REFERENCES chat."InboxMessages" ("Id") ON DELETE CASCADE
);
2025-03-27 23:26:18.173 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:58312/thread:1] (clientIp:, Scheme:) Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE chat."OutboxMessageConsumers" (
    "OutboxMessageId" uuid NOT NULL,
    "Name" text NOT NULL,
    CONSTRAINT "PK_OutboxMessageConsumers" PRIMARY KEY ("OutboxMessageId", "Name"),
    CONSTRAINT "FK_OutboxMessageConsumers_OutboxMessages_OutboxMessageId" FOREIGN KEY ("OutboxMessageId") REFERENCES chat."OutboxMessages" ("Id") ON DELETE CASCADE
);
2025-03-27 23:26:18.180 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:58312/thread:1] (clientIp:, Scheme:) Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE chat."Groups" (
    "Id" uuid NOT NULL,
    "Name" text NOT NULL,
    "CreatorId" text NOT NULL,
    "CreatedAt" timestamp with time zone NOT NULL,
    CONSTRAINT "PK_Groups" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_Groups_Users_CreatorId" FOREIGN KEY ("CreatorId") REFERENCES chat."Users" ("Id")
);
2025-03-27 23:26:18.187 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:58312/thread:1] (clientIp:, Scheme:) Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE chat."Message" (
    "Id" uuid NOT NULL,
    "SenderId" text NOT NULL,
    "ReceiverId" text NOT NULL,
    "Content" text NOT NULL,
    "ReferenceId" uuid,
    "RefrenceMessageId" uuid,
    "CreatedAt" timestamp with time zone NOT NULL,
    "DeletedAt" timestamp with time zone,
    CONSTRAINT "PK_Message" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_Message_Message_RefrenceMessageId" FOREIGN KEY ("RefrenceMessageId") REFERENCES chat."Message" ("Id"),
    CONSTRAINT "FK_Message_Users_SenderId" FOREIGN KEY ("SenderId") REFERENCES chat."Users" ("Id") ON DELETE CASCADE
);
2025-03-27 23:26:18.194 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:58312/thread:1] (clientIp:, Scheme:) Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE chat."UserFriends" (
    "UserId" text NOT NULL,
    "FriendId" text NOT NULL,
    CONSTRAINT "PK_UserFriends" PRIMARY KEY ("FriendId", "UserId"),
    CONSTRAINT "FK_UserFriends_Users_FriendId" FOREIGN KEY ("FriendId") REFERENCES chat."Users" ("Id") ON DELETE RESTRICT,
    CONSTRAINT "FK_UserFriends_Users_UserId" FOREIGN KEY ("UserId") REFERENCES chat."Users" ("Id") ON DELETE RESTRICT
);
2025-03-27 23:26:18.201 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:58312/thread:1] (clientIp:, Scheme:) Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE chat."UserLetters" (
    "Id" uuid NOT NULL,
    "SenderId" text,
    "ReceiverId" text NOT NULL,
    "LetterType" integer NOT NULL,
    "Content" text NOT NULL,
    "SentAt" timestamp with time zone NOT NULL,
    "ProcessedAt" timestamp with time zone,
    "IsHtml" boolean NOT NULL,
    "ExpireTime" timestamp with time zone NOT NULL,
    "IsRead" boolean NOT NULL,
    CONSTRAINT "PK_UserLetters" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_UserLetters_Users_ReceiverId" FOREIGN KEY ("ReceiverId") REFERENCES chat."Users" ("Id") ON DELETE CASCADE,
    CONSTRAINT "FK_UserLetters_Users_SenderId" FOREIGN KEY ("SenderId") REFERENCES chat."Users" ("Id") ON DELETE CASCADE
);
2025-03-27 23:26:18.208 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:58312/thread:1] (clientIp:, Scheme:) Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE chat."GroupMessage" (
    "Id" uuid NOT NULL,
    "GroupId" uuid NOT NULL,
    "SenderId" text NOT NULL,
    "CreatedAt" timestamp with time zone NOT NULL,
    "Content" text NOT NULL,
    "ReferenceId" uuid,
    "RefrenceMessageId" uuid,
    CONSTRAINT "PK_GroupMessage" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_GroupMessage_GroupMessage_ReferenceId" FOREIGN KEY ("ReferenceId") REFERENCES chat."GroupMessage" ("Id"),
    CONSTRAINT "FK_GroupMessage_GroupMessage_RefrenceMessageId" FOREIGN KEY ("RefrenceMessageId") REFERENCES chat."GroupMessage" ("Id"),
    CONSTRAINT "FK_GroupMessage_Groups_GroupId" FOREIGN KEY ("GroupId") REFERENCES chat."Groups" ("Id") ON DELETE CASCADE,
    CONSTRAINT "FK_GroupMessage_Users_SenderId" FOREIGN KEY ("SenderId") REFERENCES chat."Users" ("Id") ON DELETE RESTRICT
);
2025-03-27 23:26:18.216 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:58312/thread:1] (clientIp:, Scheme:) Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE chat."UserGroupRoles" (
    "UserId" text NOT NULL,
    "GroupId" uuid NOT NULL,
    "RoleName" text NOT NULL,
    CONSTRAINT "PK_UserGroupRoles" PRIMARY KEY ("UserId", "GroupId", "RoleName"),
    CONSTRAINT "FK_UserGroupRoles_GroupRoles_RoleName" FOREIGN KEY ("RoleName") REFERENCES chat."GroupRoles" ("Role") ON DELETE SET NULL,
    CONSTRAINT "FK_UserGroupRoles_Groups_GroupId" FOREIGN KEY ("GroupId") REFERENCES chat."Groups" ("Id") ON DELETE CASCADE,
    CONSTRAINT "FK_UserGroupRoles_Users_UserId" FOREIGN KEY ("UserId") REFERENCES chat."Users" ("Id") ON DELETE CASCADE
);
2025-03-27 23:26:18.223 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:58312/thread:1] (clientIp:, Scheme:) Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE chat."MessageReaction" (
    "MesssageId" uuid NOT NULL,
    "ReactionId" text NOT NULL,
    "MessageId" uuid,
    "ReactorIds" text[] NOT NULL,
    CONSTRAINT "PK_MessageReaction" PRIMARY KEY ("MesssageId", "ReactionId"),
    CONSTRAINT "FK_MessageReaction_Message_MessageId" FOREIGN KEY ("MessageId") REFERENCES chat."Message" ("Id"),
    CONSTRAINT "FK_MessageReaction_Reactions_ReactionId" FOREIGN KEY ("ReactionId") REFERENCES chat."Reactions" ("Id") ON DELETE CASCADE
);
2025-03-27 23:26:18.230 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:58312/thread:1] (clientIp:, Scheme:) Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE chat."GroupMessageReaction" (
    "MesssageId" uuid NOT NULL,
    "ReactionId" text NOT NULL,
    "GroupMessageId" uuid,
    "ReactorIds" text[] NOT NULL,
    CONSTRAINT "PK_GroupMessageReaction" PRIMARY KEY ("MesssageId", "ReactionId"),
    CONSTRAINT "FK_GroupMessageReaction_GroupMessage_GroupMessageId" FOREIGN KEY ("GroupMessageId") REFERENCES chat."GroupMessage" ("Id"),
    CONSTRAINT "FK_GroupMessageReaction_Reactions_ReactionId" FOREIGN KEY ("ReactionId") REFERENCES chat."Reactions" ("Id") ON DELETE CASCADE
);
2025-03-27 23:26:18.234 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:58312/thread:1] (clientIp:, Scheme:) Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO chat."GroupRoles" ("Role", "Description", "IsDefault", "IsSystem")
VALUES ('GroupLeader', 'GroupLeader', TRUE, TRUE);
INSERT INTO chat."GroupRoles" ("Role", "Description", "IsDefault", "IsSystem")
VALUES ('Guest', 'Guest', TRUE, TRUE);
INSERT INTO chat."GroupRoles" ("Role", "Description", "IsDefault", "IsSystem")
VALUES ('Member', 'Member', TRUE, TRUE);
2025-03-27 23:26:18.238 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:58312/thread:1] (clientIp:, Scheme:) Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_GroupMessage_GroupId" ON chat."GroupMessage" ("GroupId");
2025-03-27 23:26:18.242 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:58312/thread:1] (clientIp:, Scheme:) Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_GroupMessage_Id_GroupId" ON chat."GroupMessage" ("Id", "GroupId");
2025-03-27 23:26:18.246 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:58312/thread:1] (clientIp:, Scheme:) Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_GroupMessage_ReferenceId" ON chat."GroupMessage" ("ReferenceId");
2025-03-27 23:26:18.250 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:58312/thread:1] (clientIp:, Scheme:) Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_GroupMessage_RefrenceMessageId" ON chat."GroupMessage" ("RefrenceMessageId");
2025-03-27 23:26:18.254 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:58312/thread:1] (clientIp:, Scheme:) Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_GroupMessage_SenderId" ON chat."GroupMessage" ("SenderId");
2025-03-27 23:26:18.258 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:58312/thread:1] (clientIp:, Scheme:) Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_GroupMessageReaction_GroupMessageId" ON chat."GroupMessageReaction" ("GroupMessageId");
2025-03-27 23:26:18.262 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:58312/thread:1] (clientIp:, Scheme:) Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_GroupMessageReaction_ReactionId" ON chat."GroupMessageReaction" ("ReactionId");
2025-03-27 23:26:18.266 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:58312/thread:1] (clientIp:, Scheme:) Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Groups_CreatorId" ON chat."Groups" ("CreatorId");
2025-03-27 23:26:18.270 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:58312/thread:1] (clientIp:, Scheme:) Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Message_RefrenceMessageId" ON chat."Message" ("RefrenceMessageId");
2025-03-27 23:26:18.274 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:58312/thread:1] (clientIp:, Scheme:) Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Message_SenderId" ON chat."Message" ("SenderId");
2025-03-27 23:26:18.278 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Proces2025-03-27 23:29:29.889 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:39328/thread:1] (clientIp:, Scheme:) Executed DbCommand (39ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='chat' AND
          c.relname='__EFMigrationsHistory'
)
2025-03-27 23:29:29.955 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:39328/thread:1] (clientIp:, Scheme:) Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='chat' AND
          c.relname='__EFMigrationsHistory'
)
2025-03-27 23:29:30.047 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:39328/thread:1] (clientIp:, Scheme:) Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DO $EF$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM pg_namespace WHERE nspname = 'chat') THEN
        CREATE SCHEMA chat;
    END IF;
END $EF$;
CREATE TABLE chat."__EFMigrationsHistory" (
    "MigrationId" character varying(150) NOT NULL,
    "ProductVersion" character varying(32) NOT NULL,
    CONSTRAINT "PK___EFMigrationsHistory" PRIMARY KEY ("MigrationId")
);
2025-03-27 23:29:30.079 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:39328/thread:1] (clientIp:, Scheme:) Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT EXISTS (
    SELECT 1 FROM pg_catalog.pg_class c
    JOIN pg_catalog.pg_namespace n ON n.oid=c.relnamespace
    WHERE n.nspname='chat' AND
          c.relname='__EFMigrationsHistory'
)
2025-03-27 23:29:30.084 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:39328/thread:1] (clientIp:, Scheme:) Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT "MigrationId", "ProductVersion"
FROM chat."__EFMigrationsHistory"
ORDER BY "MigrationId";
2025-03-27 23:29:30.101 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:39328/thread:1] (clientIp:, Scheme:) Applying migration '20250327162921_Create_Database'.
2025-03-27 23:29:30.163 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:39328/thread:1] (clientIp:, Scheme:) Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DO $EF$
BEGIN
    IF NOT EXISTS(SELECT 1 FROM pg_namespace WHERE nspname = 'chat') THEN
        CREATE SCHEMA chat;
    END IF;
END $EF$;
2025-03-27 23:29:30.174 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:39328/thread:1] (clientIp:, Scheme:) Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE chat."GroupRoles" (
    "Role" text NOT NULL,
    "Description" text NOT NULL,
    "IsDefault" boolean NOT NULL,
    "IsSystem" boolean NOT NULL,
    CONSTRAINT "PK_GroupRoles" PRIMARY KEY ("Role")
);
2025-03-27 23:29:30.187 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:39328/thread:1] (clientIp:, Scheme:) Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE chat."InboxMessages" (
    "Id" uuid NOT NULL,
    "Type" text NOT NULL,
    "Content" jsonb NOT NULL,
    "OccurredOnUtc" timestamp with time zone NOT NULL,
    "ProcessedOnUtc" timestamp with time zone,
    "Error" text,
    CONSTRAINT "PK_InboxMessages" PRIMARY KEY ("Id")
);
2025-03-27 23:29:30.198 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:39328/thread:1] (clientIp:, Scheme:) Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE chat."OutboxMessages" (
    "Id" uuid NOT NULL,
    "Type" text NOT NULL,
    "Content" jsonb NOT NULL,
    "OccurredOnUtc" timestamp with time zone NOT NULL,
    "ProcessedOnUtc" timestamp with time zone,
    "Error" text,
    CONSTRAINT "PK_OutboxMessages" PRIMARY KEY ("Id")
);
2025-03-27 23:29:30.205 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:39328/thread:1] (clientIp:, Scheme:) Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE chat."Reactions" (
    "Id" text NOT NULL,
    "ReactionDescription" text NOT NULL,
    "MimeType" text NOT NULL,
    "Value" text NOT NULL,
    "IsSystem" boolean NOT NULL,
    CONSTRAINT "PK_Reactions" PRIMARY KEY ("Id")
);
2025-03-27 23:29:30.213 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:39328/thread:1] (clientIp:, Scheme:) Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE chat."Users" (
    "Id" text NOT NULL,
    "Name" text NOT NULL,
    "Email" text NOT NULL,
    "IdentityId" character varying(100) NOT NULL,
    "AvatarUri" text NOT NULL,
    "CreatedAt" timestamp with time zone NOT NULL,
    "UpdatedAt" timestamp with time zone NOT NULL,
    "IsVerified" boolean NOT NULL,
    CONSTRAINT "PK_Users" PRIMARY KEY ("Id")
);
2025-03-27 23:29:30.222 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:39328/thread:1] (clientIp:, Scheme:) Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE chat."InboxMessageConsumers" (
    "InboxMessageId" uuid NOT NULL,
    "Name" text NOT NULL,
    CONSTRAINT "PK_InboxMessageConsumers" PRIMARY KEY ("InboxMessageId", "Name"),
    CONSTRAINT "FK_InboxMessageConsumers_InboxMessages_InboxMessageId" FOREIGN KEY ("InboxMessageId") REFERENCES chat."InboxMessages" ("Id") ON DELETE CASCADE
);
2025-03-27 23:29:30.229 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:39328/thread:1] (clientIp:, Scheme:) Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE chat."OutboxMessageConsumers" (
    "OutboxMessageId" uuid NOT NULL,
    "Name" text NOT NULL,
    CONSTRAINT "PK_OutboxMessageConsumers" PRIMARY KEY ("OutboxMessageId", "Name"),
    CONSTRAINT "FK_OutboxMessageConsumers_OutboxMessages_OutboxMessageId" FOREIGN KEY ("OutboxMessageId") REFERENCES chat."OutboxMessages" ("Id") ON DELETE CASCADE
);
2025-03-27 23:29:30.237 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:39328/thread:1] (clientIp:, Scheme:) Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE chat."Groups" (
    "Id" uuid NOT NULL,
    "Name" text NOT NULL,
    "CreatorId" text NOT NULL,
    "CreatedAt" timestamp with time zone NOT NULL,
    CONSTRAINT "PK_Groups" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_Groups_Users_CreatorId" FOREIGN KEY ("CreatorId") REFERENCES chat."Users" ("Id")
);
2025-03-27 23:29:30.245 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:39328/thread:1] (clientIp:, Scheme:) Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE chat."Message" (
    "Id" uuid NOT NULL,
    "SenderId" text NOT NULL,
    "ReceiverId" text NOT NULL,
    "Content" text NOT NULL,
    "ReferenceId" uuid,
    "RefrenceMessageId" uuid,
    "CreatedAt" timestamp with time zone NOT NULL,
    "DeletedAt" timestamp with time zone,
    "UserId" text,
    CONSTRAINT "PK_Message" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_Message_Message_RefrenceMessageId" FOREIGN KEY ("RefrenceMessageId") REFERENCES chat."Message" ("Id"),
    CONSTRAINT "FK_Message_Users_SenderId" FOREIGN KEY ("SenderId") REFERENCES chat."Users" ("Id") ON DELETE CASCADE,
    CONSTRAINT "FK_Message_Users_UserId" FOREIGN KEY ("UserId") REFERENCES chat."Users" ("Id")
);
2025-03-27 23:29:30.254 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:39328/thread:1] (clientIp:, Scheme:) Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE chat."UserFriends" (
    "UserId" text NOT NULL,
    "FriendId" text NOT NULL,
    CONSTRAINT "PK_UserFriends" PRIMARY KEY ("FriendId", "UserId"),
    CONSTRAINT "FK_UserFriends_Users_FriendId" FOREIGN KEY ("FriendId") REFERENCES chat."Users" ("Id") ON DELETE RESTRICT,
    CONSTRAINT "FK_UserFriends_Users_UserId" FOREIGN KEY ("UserId") REFERENCES chat."Users" ("Id") ON DELETE RESTRICT
);
2025-03-27 23:29:30.262 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:39328/thread:1] (clientIp:, Scheme:) Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE chat."UserLetters" (
    "Id" uuid NOT NULL,
    "SenderId" text,
    "ReceiverId" text NOT NULL,
    "LetterType" integer NOT NULL,
    "Content" text NOT NULL,
    "SentAt" timestamp with time zone NOT NULL,
    "ProcessedAt" timestamp with time zone,
    "IsHtml" boolean NOT NULL,
    "ExpireTime" timestamp with time zone NOT NULL,
    "IsRead" boolean NOT NULL,
    CONSTRAINT "PK_UserLetters" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_UserLetters_Users_ReceiverId" FOREIGN KEY ("ReceiverId") REFERENCES chat."Users" ("Id") ON DELETE CASCADE,
    CONSTRAINT "FK_UserLetters_Users_SenderId" FOREIGN KEY ("SenderId") REFERENCES chat."Users" ("Id") ON DELETE CASCADE
);
2025-03-27 23:29:30.272 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:39328/thread:1] (clientIp:, Scheme:) Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE chat."GroupMessage" (
    "Id" uuid NOT NULL,
    "GroupId" uuid NOT NULL,
    "SenderId" text NOT NULL,
    "CreatedAt" timestamp with time zone NOT NULL,
    "Content" text NOT NULL,
    "ReferenceId" uuid,
    "RefrenceMessageId" uuid,
    CONSTRAINT "PK_GroupMessage" PRIMARY KEY ("Id"),
    CONSTRAINT "FK_GroupMessage_GroupMessage_ReferenceId" FOREIGN KEY ("ReferenceId") REFERENCES chat."GroupMessage" ("Id"),
    CONSTRAINT "FK_GroupMessage_GroupMessage_RefrenceMessageId" FOREIGN KEY ("RefrenceMessageId") REFERENCES chat."GroupMessage" ("Id"),
    CONSTRAINT "FK_GroupMessage_Groups_GroupId" FOREIGN KEY ("GroupId") REFERENCES chat."Groups" ("Id") ON DELETE CASCADE,
    CONSTRAINT "FK_GroupMessage_Users_SenderId" FOREIGN KEY ("SenderId") REFERENCES chat."Users" ("Id") ON DELETE RESTRICT
);
2025-03-27 23:29:30.281 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:39328/thread:1] (clientIp:, Scheme:) Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE chat."UserGroupRoles" (
    "UserId" text NOT NULL,
    "GroupId" uuid NOT NULL,
    "RoleName" text NOT NULL,
    CONSTRAINT "PK_UserGroupRoles" PRIMARY KEY ("UserId", "GroupId", "RoleName"),
    CONSTRAINT "FK_UserGroupRoles_GroupRoles_RoleName" FOREIGN KEY ("RoleName") REFERENCES chat."GroupRoles" ("Role") ON DELETE SET NULL,
    CONSTRAINT "FK_UserGroupRoles_Groups_GroupId" FOREIGN KEY ("GroupId") REFERENCES chat."Groups" ("Id") ON DELETE CASCADE,
    CONSTRAINT "FK_UserGroupRoles_Users_UserId" FOREIGN KEY ("UserId") REFERENCES chat."Users" ("Id") ON DELETE CASCADE
);
2025-03-27 23:29:30.288 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:39328/thread:1] (clientIp:, Scheme:) Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE chat."MessageReaction" (
    "MesssageId" uuid NOT NULL,
    "ReactionId" text NOT NULL,
    "MessageId" uuid,
    "ReactorIds" text[] NOT NULL,
    CONSTRAINT "PK_MessageReaction" PRIMARY KEY ("MesssageId", "ReactionId"),
    CONSTRAINT "FK_MessageReaction_Message_MessageId" FOREIGN KEY ("MessageId") REFERENCES chat."Message" ("Id"),
    CONSTRAINT "FK_MessageReaction_Reactions_ReactionId" FOREIGN KEY ("ReactionId") REFERENCES chat."Reactions" ("Id") ON DELETE CASCADE
);
2025-03-27 23:29:30.298 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:39328/thread:1] (clientIp:, Scheme:) Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE chat."GroupMessageReaction" (
    "MesssageId" uuid NOT NULL,
    "ReactionId" text NOT NULL,
    "GroupMessageId" uuid,
    "ReactorIds" text[] NOT NULL,
    CONSTRAINT "PK_GroupMessageReaction" PRIMARY KEY ("MesssageId", "ReactionId"),
    CONSTRAINT "FK_GroupMessageReaction_GroupMessage_GroupMessageId" FOREIGN KEY ("GroupMessageId") REFERENCES chat."GroupMessage" ("Id"),
    CONSTRAINT "FK_GroupMessageReaction_Reactions_ReactionId" FOREIGN KEY ("ReactionId") REFERENCES chat."Reactions" ("Id") ON DELETE CASCADE
);
2025-03-27 23:29:30.302 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:39328/thread:1] (clientIp:, Scheme:) Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO chat."GroupRoles" ("Role", "Description", "IsDefault", "IsSystem")
VALUES ('GroupLeader', 'GroupLeader', TRUE, TRUE);
INSERT INTO chat."GroupRoles" ("Role", "Description", "IsDefault", "IsSystem")
VALUES ('Guest', 'Guest', TRUE, TRUE);
INSERT INTO chat."GroupRoles" ("Role", "Description", "IsDefault", "IsSystem")
VALUES ('Member', 'Member', TRUE, TRUE);
2025-03-27 23:29:30.307 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:39328/thread:1] (clientIp:, Scheme:) Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_GroupMessage_GroupId" ON chat."GroupMessage" ("GroupId");
2025-03-27 23:29:30.312 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:39328/thread:1] (clientIp:, Scheme:) Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX "IX_GroupMessage_Id_GroupId" ON chat."GroupMessage" ("Id", "GroupId");
2025-03-27 23:29:30.317 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:39328/thread:1] (clientIp:, Scheme:) Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_GroupMessage_ReferenceId" ON chat."GroupMessage" ("ReferenceId");
2025-03-27 23:29:30.321 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:39328/thread:1] (clientIp:, Scheme:) Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_GroupMessage_RefrenceMessageId" ON chat."GroupMessage" ("RefrenceMessageId");
2025-03-27 23:29:30.326 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:39328/thread:1] (clientIp:, Scheme:) Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_GroupMessage_SenderId" ON chat."GroupMessage" ("SenderId");
2025-03-27 23:29:30.331 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:39328/thread:1] (clientIp:, Scheme:) Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_GroupMessageReaction_GroupMessageId" ON chat."GroupMessageReaction" ("GroupMessageId");
2025-03-27 23:29:30.336 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:39328/thread:1] (clientIp:, Scheme:) Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_GroupMessageReaction_ReactionId" ON chat."GroupMessageReaction" ("ReactionId");
2025-03-27 23:29:30.341 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:39328/thread:1] (clientIp:, Scheme:) Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Groups_CreatorId" ON chat."Groups" ("CreatorId");
2025-03-27 23:29:30.346 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:39328/thread:1] (clientIp:, Scheme:) Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Message_RefrenceMessageId" ON chat."Message" ("RefrenceMessageId");
2025-03-27 23:29:30.351 +07:00 [INF] [module:ThreadLike.Chat.Api/machine:DESKTOP-UMM86U5/Process:39328/thread:1] (clientIp:, Scheme:) Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX "IX_Message_SenderId" ON chat."M